{# Resources/views/collection/show.html.twig #}

{% extends 'base.html.twig' %}

{% set page_title = collection.name|e %}

{% block body_id 'show_collection' %}

{% block body %}

	<div class="row column">

	    <p>Collection by <a href="{{ path('profile_base_default', {'username': collection.owner.username}) }}">{{ collection.owner.username }}</a></p>

	    {% if is_granted('edit', collection) %}
	    	<p>
	    		<a class="button" href="{{ path('edit_collection', {'id': collection.id}) }}">{{ 'collection.button.edit'|trans }}</a>
	    		<a class="button" href="{{ path('new_album', {'collection': collection.id}) }}">{{ 'collection.button.add_album'|trans }}</a>
	    		{% if is_granted('edit_permissions', collection) %}
	                <a class="button" href="{{ path('edit_collection_permissions', {'id': collection.id}) }}">{{ 'collection.button.edit_permissions'|trans }}</a>
	            {% endif %}
	    	</p>
	    {% endif %}

	    <p>{{ collection.description|e }}</p>
	</div>

	    {% for album in albums %}
	    	{% set link = path('show_album', {'id': album.id}) %}
	    	{% set thumb = random(album.photos) %}
	    	<div class="row">
		    	<div class="column large-2 medium-4 small-12">
		        	<a href="{{link}}"><img class="thumbnail" src="{{ signed_url_cacher.getUrl(thumb.photo.sizeThumb) }}"></a>
		        </div>
		        <div class="column large-10 medium-8 small-12">
			        <h3><a href="{{ link }}">{{ album.name }}</a> <small class="h3-comment">{{ 'album.view.num_photos'|transchoice(album.photos.count) }}</small></h3>
			        <p>{{ album.description }}</p>
			    </div>
		    </div>
	    {% endfor %}

	    
{% endblock %}
